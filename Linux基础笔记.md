# 1、操作系统的基本概念

## 1.1、Windows与Linux的关系

当前主流的操作系统：Windows、android、ios、symbian、unix \linux

windows：傻瓜式、好学习

Linux：Linux认为每个用户都是专业人士，操作麻烦，学习难度大，免费的，开源的，性能好，可移植性好，好的设计理念

Android：移动操作系统，Android基于Linux

iOS：很优秀，创造性

嵌入式操作系统：Linux+WinCE

当前运用领域：消费电子Android，工业linux

## 1.2、多机开发：双系统和虚拟机

开发嵌入式程序需要Linux环境。但是因为Windows中有很多很好用的软件，如notepad++，sourceinsight，所以我们也需要Windows。

既需要Windows又需要Linux。

第一种：双系统：两个系统来回切换不方便

第二种：虚拟机：方便，损失性能，与真机有微弱的差距

第三种：两台电脑：不方便

现实中：对于个人开发者来说虚拟机更方便，大公司是用服务器+客户端

## 1.3、搭建开发环境

虚拟机软件：单纯在Windows环境下运行的常规软件，主流的虚拟机软件有VMware和virtualbox

虚拟机软件在Windows上运行来模拟一台电脑，在虚拟机中安装别的操作系统

## 1.4、隐藏文件和非隐藏文件

Windows中文件的隐藏与不隐藏是通过修改文件属性实现的。

Linux中：隐藏文件的特点是文件名前面以“.”开头，跟属性无关，在Linux中查看隐藏文件要用 “ls-a” 显示隐藏文件

## 1.5、相对路径与绝对路径

什么是路径：路径是用来标识一个文件在操作系统中的文件系统中存储位置的。pathname

例如：D:\winshare\enum.c  就是一个全路径pathname

 D:\winshare        就是路径      path

 enum.c              就是文件名    name

绝对路径：是从绝对位置开始的。  例如在Windows中从某一个盘符开始的 （C:\），Linux中从根目录“\”开始的。

举例：

/abc/123/def.txt   是Linux中的绝对路径

Abc/123.def.txt   不是Linux中的绝对路径

相对路径：指明路径的时候，从当前路径位置开始。

举例：D:\我的文档\abc\abc.txt

 D:\我的文档\123\123.txt

 当前在123.txt要去abc.txt

方法一：使用绝对路径。直接给出abc.txt的绝对路径 D:\我的文档\abc\abc.txt

方法二：采用相对路径。从当前路径开始往上走一层（abc）再往下走一层就到了 。../abc/abc.txt

# 2、Linux基础知识与技能

## 2.1、Linux的内核、发行版

Linux本身指的是一个操作系统的内核，只有内核是无法直接使用的，我们需要的是包含了内核和一批应用程序的一个集合体。这个就叫Linux的发行版。

Ubuntu、Redhat就是Linux的不同发行版。

## 2.2、GUI（图形用户界面）和comdline(命令行)

GUI：grahics user interface ,图形用户界面。

comdline：command line ,命令行。

人机交互：人和机器（计算机）进行交互，常用的有命令行和GUI

Windows和Linux都是既有GUI又有命令行的，但是前者主要是GUI后者主要是命令行

## 2.3、Linux使用技巧

### 1、使用Tab键输入

### 2、Linux命令行中一些符号的含义

​	.			代表当前目录

​	..		   代表上一层目录，当前目录的父目录

​	-			代表前一个目录，我刚才是从哪一个目录过来的

​	~			代表当前用户的宿主目录

​	$			普通用户的命令行提示符

​	#			root用户的命令行提示符 

​	*			万能匹配符

宿主目录：就是操作系统为当前用户所设计的用来存放文件、工作的默认目录如Windows中的“我的文档”就是Windows中的宿主目录。Linux中每个用户都有自己的宿主目录，这个目录对于普通用户来说在/home/username/,对于root用户来说在/root。			

## 2.4、Linux常用命令

### (1) ls  (list ,列表)

作用：使用列表把当前文件夹的内容显现出来

ls -a  显示所有文件包括隐藏文件

ls -l   以详细信息显示

显示详细信息时文件的前十个字符表示文件类型，后面9个字符表示文件权限。

第一个字符所代表的意义

“-” 表示是个普通的文本文件，指文本文件和二进制文件

“d” 表示文件夹，“d”时“directory”的缩写

“l” 表示时符号连接文件，，后面会用->打印出它指向的文件

“s” 表示scoket文件

“p” 表示管道文件 pipe

ls -l -a; ls -a -l; ls -la 都是可以的 效果会叠加

### (2) cd (change directory,更改目录)

作用：切换目录

涉及到相对路径和绝对路径

​	cd ..      ..代表上一层目录

​			.  代表当前目录

### (3) pwd (print work directory,打印工作目录)

作用：打印出当前的绝对路径

### (4) mkdir (make directory,创建文件夹)

作用：创建空文件夹

​	mkdir -p abc/def  创建级联文件夹

### (5) mv (move,移动)

作用：在目录间移动文件，重命名文件名

​	mv 源文件pathname 目标文件的pathname （移动和重命名可同时进行）

### (6) touch  

作用：创建空文件

​	touch pathname

### (7) cp (copy ,复制)

作用：复制文件或文件夹

​	cp 源文件pathname 目标文件pathname（可以复制和重命名同时进行））

​	cp -r 用来复制文件夹

​	cp -f 强制复制

实际操作时，一般用cp -f 复制文件 cp -fr 复制文件夹 （Linux中复制文件未成功系统不会告知所以一般都会用强制复制但是要小心它将有用的文件覆盖掉）

### (8) rm (remove,删除)

作用：用来删除文件和文件夹

​	rm 文件pathname

​	rm -r 文件间pathname

​	rm -rf (当删除不存在的文件时 加 f 和不加 f 返回值是不同的)

### (9) cat 

作用：直接在命令行中展示文件内容，也可以用来做输入

### (10)  rmdir (remove directory ,删除文件夹)

作用：与 rm -r 相比只能删除空文件夹

### (11) ln  (link,连接文件)

基础：Windows中快捷方式，实际上快捷方式和它所指向的那个文件是独立的两个文件，两个都占硬盘空间，只不过用户访问快捷方式时，其效果等同于直接访问指向文件。

Linux中有两种链接文件：

​	一种叫软连接（符号连接），等同于Windows中的快捷方式

​	一种叫硬连接

创建软连接文件：ln -s  源文件名 符号连接文件名

举例：ln -s abc.c cad.c  cad.c就是abc.c的符号连接文件

硬连接的创建：ln 源文件名 符合连接名 

硬连接实际上和源文件在硬盘上是同一个东西，效果类似于硬盘上的一个文件，在文件系统上，在我们看来有好多个文件一样。每次删除一个文件时只要它还有其他硬连接的存在，这个文件就不会被删除，只有等连接文件都删除了，这个文件才会被删除。

### (12) man 

查询man手册，获取帮助信息

man 1 ls 代表你所要查的 ls 的命令

man 2 ls 代表你要查的 ls 的api

man 3 ls 代表你要查的 ls 的c库函数

### (13) apt-get

作用：用来在线安装卸载软件的程序

​	apt-get install vim 安装vim

​	apt-get remove vim 卸载vim

注意，安装和卸载软件都是在线的，你的Ubuntu必须能上网才能使用 apt-get 

说明：用 apt-get 安装软件的原来和必要性

Linux操作系统的发行版本，内核版本，定制性，造成Linux中软件的不兼容性。在Linux中安装软件是件困难的事情，装了软件不一定能用	。Ubuntu解决了这个问题，Ubuntu就适合某一个发行版的所有软件做了个列表，然后用户通过 apt-get install 安装软件时，服务器会根据你Ubuntu版本，给你下载合适的软件来安装，这样确保了软件的兼容性。

带来的问题：1、权限问题 2、虚拟机上不了网的问题



# 3、编辑器vi的使用（vi和vim的联系）

什么是编辑器？编辑器就是个软件，它的作用就是用来编辑。	例如编写文件，编写代码。

Windows中的常用的编辑器，如自带的notepad。比较好用的列如notepad++，UltraEditor。

Linux中常用编辑器，自带的最古老的vi，比较好用的vim，gedit。

注：vi和vim的关系：vim是vi的升级版。推荐使用vim

后面提到的vi就是vim

## 3.1、 vi的基础使用

（1）使用vi来打开/创建一个文件时，vi 文件名pathname

（2）vi的两种工作模式：

命令模式：当vi打开时默认为命令模式，要转入输入模式按“a”或“i”。在命令模式下，此时键盘上的输入的所有东西都被vi当作命令对待。

在命令模式下，最后不要乱输入。此时应该输入相应的命令，来让vi做相应的事情。

输入模式：用来向文件输入内容，可以从命令模式中按“a”或者“i”进入。输入完成后要先退回到命令模式（因为保存也是一种命令），在输入模式下按Esc键。

在命令模式下保存：

”:wq“	保存并退出

":w"	 只保存不退出

":q"	  之退出不保存

":q!"	不保存强制退出

":wq!"	保存并强制退出

## 3.2、 vi 的高级使用

### （1）查找

在命令模式下，输入“/ xxx“，就可以查找到xxx

### （2）快速切换行

在命令模式下，输入”：num“就可以快速切换到num行

### （3）设置显示行号

在命令模式下，输入”set nu“显示行号

设置不显示行号输入“set nonu”

设置永久显示行号，需要修改vi的配置文件。打开vi的配置文件~/.vimrc，在其中输入”set nu“即可。

### （4）行删除

在命令模式下，先将光标移动到要删除的行再输入”dd“

如果要删除连续的n行，使用”ndd“

### （5）行复制粘贴

复制：命令模式下，”nyy“复制n行的内容

粘贴：命令模式下，”p“

细节：复制时将光标放在粘贴行的第一行，粘贴是往当前光标的下一行进行粘贴

## 3.3、Linux中的权限表示&管理

### 3.3.1、普通用户和特权用户

Windows中有普通用户和特权用户，特权用户就是administered，普通用户可以有很多个。

特权用户时系统的管理员，对系统内所有文件具有操作权限，每个普通用户只能出来自己的文件不能访问其他用户的文件更不能随意处理系统文件。

Linux中也有普通用户和特权用户。普通用户权限受到限制，例如普通用户不能cd /root/，普通用户不能使用apt-get install 安装软件

可以使用”su 用户名“ 在不同的用户之间切换。

### 3.3.2、rwx与权限表示

ls -l    显示详细信息时

drwxrwxr-x，这10个字符，第一个字符表示文件类型，剩下的9个分成3组表示文件权限。

前三个表示此文件的属主对文件的权限

中间三个表示文件属主所在的组对文件的权限

最后三个表示此文件其他用户对文件的权限

“rwx”的解析：“r”代表可读，“w”代表可写，“x”代表可执行

rwx:可读可写可执行

r-x:可读不可写，可执行

r--:可读不可写不可执行

### 3.3.3、使用sudo暂时获取root权限

这个时Ubuntu的一个特点，在Ubuntu中使用sudo命令让普通用户暂时获取root用户的权限不必进行用户的切换

在需要用到权限的指令前面加入 sudo

# 4、Linux高级命令

## 4.1 、find 

在Linux文件系统中，用来查找一个文件放在哪里了。

find /ect -name "interfaces"  

总结：

（1）什么时候用：当你知道文件名，但是忘记它被放在哪个目录下，要找到该文件，用find

（2）怎么用：find 路径 -name "查找文件名"

## 4.2、grep

功能：在一个文本文件中查找某一个词

举例：grep -nr “sum” *

总结：

（1）当你想查找某些符号在哪些地方（有可能是一个文件，或多个文件组成的文件夹）出现过就可以用grep

（2） 格式：	grep -nr ''要查找的符号'' 要查找的目录或文件集合

-n 表示查找结果显示行号

-r 表示要递归查找

## 4.3、which和whereis

功能：查找一个应用程序（二进制文件）在哪

举例：which ls      whereis ls

区别：which只显示二进制文件的路径，whereis显示二进制的路径和其源码或man手册位置

## 4.4、uname

功能：查看系统信息

## 4.5、开机和关机

shutdown -h now   立即关机

init 0                       关机

shutdown -r now    立即重启

reboot 

init 2                      重启

## 4.6、tree/lstree

功能：显示文件和目录由根目录开始的树形结构

## 4.7、mount/umount

功能：用来挂载磁盘的文件系统中

举例：mount -t nfs -o nolock 192.168.1.141:/root/rootfs/mnt  挂载磁盘

​		   umount /mnt 卸载磁盘

## 4.8、查询磁盘空间相关

df -h 显示已挂载的分区列表

du -h 文件名 列出文件或文件夹的大小，列出方式人比较好观察

## 4.9、用户管理

useradd user1 添加一个名字为user1的用户

userdel user1 删除一个名字为user1的用户

password user1 为user1用户设置密码

## 4.10、权限管理

chmod   change mode 修改文件权限

chown    change owner 修改文件属主

chgrp     change group  修改文件属主所在组的权限

作用：用来管理文件系统中文件的权限的

drwxrwxr-x，这10个字符，第一个字符表示文件类型，剩下的9个分成3组表示文件权限。

前三个表示此文件的属主对文件的权限

中间三个表示文件属主所在的组对文件的权限

最后三个表示此文件其他用户对文件的权限

权限还有另外的表示方法，用数字来表示。

编码规则：

r       可读    数字编码  4

w      可写    数字编码  2

x       可执行 数字编码  1

--       无权限 数字编码  0

有了这个编码规则，则drwxrwxr-x 编码后 775

第一种修改文件的方法：

要把权限改成 drwxr-xr-x  对应的编码值为 755

修改命令为 chmod 755 文件名

第二中修改权限的方法：

在原来的权限基础上修改 增加或减少某些权限

三个组的用户的编码以此为：属主为u  属主所在的组为g  其他用户为o

例如

要增加属主可执行权限：chmod u+x

要增加属主所在组的可写权限 chmod g+w

要增加其他用户的可读权限 chmod o+r

## 4.11、文件的打包与解压缩

tar -czvf 压缩文件名.tar.gz  目标文件名  将目标目录文件打包成dir.tar.gz

tar -cjvf 压缩文件名.tar.bz2  目标文件名  将目标目录文件打包成dir.tar.bz2

tar -zxvf dir.tar.gz      解压缩dir.tar.gz

tar -jxvf dir.tar.bz2     解压缩dir.tar.bz2

## 4.12、网络配置命令

ifconfig                                         查询ip

ifconfig eth0 192.168.1.116          设置ip

ifconfig eth0 up                            启动网卡

ifconfig eth0 down                       禁用网卡

ifup eth0                                      启动网卡

ifdown eth0                                 禁用网卡

ifconfig eth0 192.168.1.116 netmask 255.255.255.0 同时设置ip和子网掩码

## 4.13、虚拟机Linux上网的问题

### 4.13.1、VMware中的虚拟网络的三种设置

第一种：桥接 （bridge）

第二种：NAT

第三种：Host only  该模式下 仅主机可以上午 虚拟机不可以上网

### 4.13.2、虚拟机上网方式1：NAT方式

第一步：在菜单栏 虚拟机->设置->硬件->网络适配器，右侧选择NAT上网模式

第二步：vi /ect/network/interfaces，打开文件将文件中的static修改为dhcp 保存退出

第三步：执行/ect/init.d/networking restart 重启网卡

4.13.3、虚拟机上网方式2：桥接方式

第一步：在菜单栏 虚拟机->设置->硬件->网络适配器，右侧选择桥接模式

第二步：桥接到可以上网的网卡上，在菜单栏 编辑->虚拟网络编辑器，桥接到在windows中可以上网的网卡上（一般就是WiFi网络或者有线网络）

第三步：设置dhcp并重启网络：vi /ect/network/interfaces，打开文件将文件中的static修改为dhcp 保存退出，然后执行/ect/init.d/networking restart 重启网卡

### 4.13.4、总结

第一种NAT方式设置上网比较简单 ，但是不能用在嵌入式开发中。

第二章桥接设置上网比较繁琐，但是在嵌入式开发中比较有用。

